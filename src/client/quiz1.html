<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Q. 1</title>
    <link rel="stylesheet" href="./styles/quiz1.css" />
  </head>
  <body>
    <div class="container">
      <h1 class="title">Quiz</h1>
      <p class="subtitle" id="question">문제 불러오기</p>

      <script type="text/javascript" src="./scripts/jumpscare.js"></script>


      <div class="input-container">
        <button class="choice"></button>
        <button class="choice"></button>
        <button class="choice"></button>
        <button class="choice"></button>
      </div>
    </div>

<script>
async function loadQuiz() {
        try {
          const res = await fetch("/quiz");
          if (!res.ok) throw new Error("HTTP 오류: " + res.status);
          const quiz = await res.json();

          if (!quiz.answers || quiz.answers.length === 0) {
              alert("퀴즈 데이터가 없습니다.");
              return;
          }

          document.getElementById("question").textContent = quiz.question;

          const buttons = document.querySelectorAll(".choice");

          buttons.forEach((btn, i) => {
            if (quiz.answers[i]) {
              btn.textContent = quiz.answers[i].content;
              btn.onclick = () => {
                if (quiz.answers[i].is_correct === 1) {
                  alert("정답입니다 다음 문제로 넘어갑니다.");
                  loadQuiz();
                } else {
                  alert("틀렸습니다 다시 시도해보세요!");
                }
              }
            } else {
              btn.style.display = "none";
            }
          });

        } catch (err) {
          console.error("퀴즈 불러오기 실패:", err);
          alert("서버에서 퀴즈를 가져오지 못했습니다.");
        }
      }

      // 정답 확인
      function checkAnswer(selected, correct) {
        if (selected === correct) {
          alert("정답입니다 다음 문제로 넘어갑니다.");
          loadQuiz(); // 다시 랜덤 퀴즈 로드
        } else {
          alert("틀렸습니다 다시 시도해보세요!");
        }
      }

      // 페이지 로드 시 첫 퀴즈 가져오기
      loadQuiz();
</script>

  </body>

  
</html>